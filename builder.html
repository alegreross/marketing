<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Welcome Gift Builder</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>body{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}</style>
</head>
<body class="bg-slate-50 text-slate-800">
  <div id="root"></div>
  <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script>
  const ENDPOINT_URL = "https://script.google.com/macros/s/AKfycbyMRTpMiGD_d56NPpoXxlwZdwXaLpcOAtUq_kGC7zNH2kljgDp_PfX7tEC2TrGXc3Z70g/exec";
  const ADMIN_EMAIL  = "roselleralegre2019@gmail.com";
  const SITE_NAME    = "Welcome Gift Program";

  const { useMemo, useState } = React;
  const CATALOG=[
    {id:"tee",name:"Soft Tee",sku:"TEE-100",base:7.5,img:"tee"},
    {id:"bottle",name:"Insulated Bottle",sku:"BOT-220",base:14.0,img:"bottle"},
    {id:"cap",name:"Structured Cap",sku:"CAP-330",base:9.25,img:"cap"},
    {id:"notebook",name:"Hardcover Notebook",sku:"NTB-115",base:6.75,img:"notebook"},
    {id:"pen",name:"Metal Pen",sku:"PEN-050",base:2.25,img:"pen"},
    {id:"mug",name:"Ceramic Mug",sku:"MUG-180",base:4.4,img:"mug"},
    {id:"sticker",name:"Die-Cut Sticker Set",sku:"STK-410",base:1.8,img:"sticker"},
    {id:"towel",name:"Microfiber Towel",sku:"TWL-205",base:3.6,img:"towel"},
  ];
  const BOX_TIERS=[
    {id:"starter",name:"Starter Kit",slots:3,pack:4.0,color:"bg-emerald-600"},
    {id:"standard",name:"Standard Kit",slots:4,pack:6.0,color:"bg-indigo-600"},
    {id:"premium",name:"Premium Kit",slots:5,pack:9.0,color:"bg-amber-600"},
  ];
  function Icon({kind}){
    const c='w-14 h-14 text-slate-400';
    if(kind==='tee')return React.createElement('svg',{viewBox:'0 0 128 128',className:c},React.createElement('path',{d:'M32 20l16 8h32l16-8 12 16-16 10v62H36V46L20 36z',fill:'currentColor'}));
    if(kind==='bottle')return React.createElement('svg',{viewBox:'0 0 128 128',className:c},React.createElement('rect',{x:50,y:10,width:28,height:16,rx:4,className:'fill-current'}),React.createElement('rect',{x:44,y:26,width:40,height:90,rx:8,className:'fill-current'}));
    if(kind==='cap')return React.createElement('svg',{viewBox:'0 0 128 128',className:c},React.createElement('path',{d:'M12 76c10-20 36-34 60-30 18 3 32 15 44 30l-8 10H20z',className:'fill-current'}),React.createElement('rect',{x:88,y:74,width:28,height:16,rx:8,className:'fill-current'}));
    if(kind==='notebook')return React.createElement('svg',{viewBox:'0 0 128 128',className:c},React.createElement('rect',{x:30,y:18,width:56,height:92,rx:6,className:'fill-current'}),React.createElement('rect',{x:38,y:30,width:32,height:6,className:'fill-current'}));
    if(kind==='pen')return React.createElement('svg',{viewBox:'0 0 128 128',className:c},React.createElement('path',{d:'M20 100l16 8 64-64-16-8z',className:'fill-current'}),React.createElement('rect',{x:86,y:26,width:16,height:16,className:'fill-current'}));
    if(kind==='mug')return React.createElement('svg',{viewBox:'0 0 128 128',className:c},React.createElement('rect',{x:28,y:28,width:56,height:64,rx:8,className:'fill-current'}),React.createElement('rect',{x:84,y:40,width:16,height:28,rx:6,className:'fill-current'}));
    if(kind==='sticker')return React.createElement('svg',{viewBox:'0 0 128 128',className:c},React.createElement('rect',{x:28,y:28,width:64,height:64,rx:10,className:'fill-current'}),React.createElement('path',{d:'M92 62v20H72z',className:'fill-current'}));
    if(kind==='towel')return React.createElement('svg',{viewBox:'0 0 128 128',className:c},React.createElement('path',{d:'M32 24h56v80H32z',className:'fill-current'}),React.createElement('path',{d:'M32 44h56',stroke:'currentColor','stroke-width':6}));
    return React.createElement('div',{className:'w-14 h-14 rounded-lg bg-slate-300'});
  }
  function App(){
    const [tier,setTier]=useState(BOX_TIERS[1]);
    const [selected,setSelected]=useState([]);
    const [qty,setQty]=useState(25);
    const [brand,setBrand]=useState('Your Brand');
    const [email,setEmail]=useState('');
    const [logoDataUrl,setLogoDataUrl]=useState(null);
    const [logoName,setLogoName]=useState('');
    const [sending,setSending]=useState(false);
    const [error,setError]=useState('');
    const remaining=tier.slots-selected.length;
    const priceEach=useMemo(()=>{
      const items=selected.map(id=>CATALOG.find(i=>i.id===id));
      const itemSum=items.reduce((s,i)=>s+(i?.base||0),0);
      const volume=qty>=250?0.9:qty>=100?0.94:qty>=50?0.97:1;
      return ((itemSum+tier.pack)*volume).toFixed(2);
    },[selected,tier,qty]);
    const total=useMemo(()=> (qty*parseFloat(priceEach||0)).toFixed(2),[qty,priceEach]);
    const toggle=(id)=>setSelected(prev=> prev.includes(id)?prev.filter(x=>x!==id):(prev.length<tier.slots?[...prev,id]:prev));
    const reset=()=>setSelected([]);
    const onLogoChange=(e)=>{
      const f=e.target.files && e.target.files[0]; if(!f) return;
      setLogoName(f.name);
      const reader=new FileReader(); reader.onload=()=>setLogoDataUrl(reader.result); reader.readAsDataURL(f);
    };
    const clearLogo=()=>{ setLogoDataUrl(null); setLogoName(''); };
    async function submit(){
      setError('');
      if(!email){ setError('Please enter a contact email.'); return; }
      setSending(true);
      const payload={
        admin: ADMIN_EMAIL,
        site: SITE_NAME,
        email, brand,
        tier: { id: tier.id, name: tier.name, slots: tier.slots, pack: tier.pack },
        qty, priceEach, total,
        items: selected.map(id=>({ id, name: (CATALOG.find(i=>i.id===id)||{}).name || id })),
        logo: logoDataUrl ? { name: logoName || 'logo.png', dataUrl: logoDataUrl } : null,
      };
      try{
        const res = await fetch(ENDPOINT_URL, {
          method: 'POST',
          headers: { 'Content-Type': 'text/plain' },  // <= avoid CORS preflight
          body: JSON.stringify(payload),
        });
        const txt = await res.text();
        if(!res.ok){ throw new Error('Server responded '+res.status+': '+txt); }
        window.location.href = 'thankyou.html';
      }catch(err){
        console.error(err);
        setError('Submit failed. '+String(err));
      }finally{
        setSending(false);
      }
    }
    return React.createElement('div',null,
      React.createElement('header',{className:'sticky top-0 z-20 backdrop-blur bg-white/80 border-b border-slate-200'},
        React.createElement('div',{className:'max-w-6xl mx-auto px-4 py-4 flex items-center justify-between'},
          React.createElement('div',{className:'flex items-center gap-3'},
            React.createElement('div',{className:'h-10 w-10 rounded-2xl bg-slate-900 grid place-items-center text-white'},'🎁'),
            React.createElement('div',null,
              React.createElement('h1',{className:'text-xl font-semibold leading-tight'},'Welcome Gift Builder'),
              React.createElement('p',{className:'text-xs text-slate-500'},'Interactive landing page prototype for promotional kitting')
            )
          ),
          React.createElement('div',{className:'flex items-center gap-4 text-sm'},
            React.createElement('div',{className:'hidden sm:block'},React.createElement('span',{className:'text-slate-500'},'Estimate / ea'),React.createElement('div',{className:'text-lg font-semibold'},'$'+priceEach)),
            React.createElement('div',{className:'hidden sm:block'},React.createElement('span',{className:'text-slate-500'},'Order Qty'),React.createElement('div',{className:'text-lg font-semibold'},qty)),
            React.createElement('a',{href:'index.html',className:'px-3 py-2 rounded-xl border border-slate-300'},'Back')
          )
        )
      ),
      React.createElement('main',{className:'max-w-6xl mx-auto px-4 py-8 grid lg:grid-cols-5 gap-6'},
        React.createElement('section',{className:'lg:col-span-3 space-y-6'},
          React.createElement('div',{className:'bg-white rounded-2xl shadow-sm p-5 border border-slate-200'},
            React.createElement('div',{className:'flex items-start justify-between'},
              React.createElement('div',null,React.createElement('h2',{className:'text-lg font-semibold'},'1) Select Kit'),React.createElement('p',{className:'text-sm text-slate-500'},'Pick a box tier, add items, and set your quantity.')),
              React.createElement('button',{onClick:reset,className:'text-sm px-3 py-1.5 rounded-lg border border-slate-300 hover:bg-slate-50'},'Reset')
            ),
            React.createElement('div',{className:'mt-4 grid md:grid-cols-3 gap-3'},
              BOX_TIERS.map(b=>React.createElement('button',{key:b.id,onClick:()=>{setTier(b);setSelected(prev=>prev.slice(0,b.slots));},className:`relative rounded-2xl border p-4 text-left hover:shadow transition ${tier.id===b.id?'border-slate-900':'border-slate-200'}`},
                React.createElement('div',{className:`h-8 w-8 rounded-xl ${b.color} grid place-items-center text-white mb-2`},'📦'),
                React.createElement('div',{className:'font-medium'},b.name),
                React.createElement('div',{className:'text-xs text-slate-500'},`Up to ${b.slots} items • Packing $${b.pack.toFixed(2)}`),
                tier.id===b.id&&React.createElement('span',{className:'absolute top-3 right-3 text-emerald-600'},'✔')
              ))
            ),
            React.createElement('div',{className:'mt-4 grid sm:grid-cols-3 gap-3'},
              React.createElement('label',{className:'block'},React.createElement('span',{className:'text-xs text-slate-500'},'Brand/Program Name'),React.createElement('input',{value:brand,onChange:e=>setBrand(e.target.value),className:'mt-1 w-full rounded-xl border border-slate-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-slate-900'})),
              React.createElement('label',{className:'block'},React.createElement('span',{className:'text-xs text-slate-500'},'Order Quantity'),React.createElement('input',{type:'number',min:10,step:5,value:qty,onChange:e=>setQty(Math.max(10,parseInt(e.target.value||10))),className:'mt-1 w-full rounded-xl border border-slate-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-slate-900'})),
              React.createElement('div',{className:'rounded-xl bg-slate-100 p-3 text-sm'},React.createElement('div',{className:'flex items-center gap-2'},'ℹ️','Remaining Slots'),React.createElement('div',{className:`mt-1 text-lg font-semibold ${remaining<0?'text-rose-600':''}`},remaining>=0?remaining:0))
            )
          ),
          React.createElement('div',{className:'bg-white rounded-2xl shadow-sm p-5 border border-slate-200'},
            React.createElement('h2',{className:'text-lg font-semibold'},'2) Select Items'),
            React.createElement('p',{className:'text-sm text-slate-500'},`Choose up to ${tier.slots} items for your ${tier.name}.`),
            React.createElement('div',{className:'mt-4 grid sm:grid-cols-2 lg:grid-cols-3 gap-4'},
              CATALOG.map(item=>{
                const active=selected.includes(item.id);
                const disabled=!active && selected.length>=tier.slots;
                return React.createElement('button',{key:item.id,onClick:()=>toggle(item.id),className:`group rounded-2xl border p-4 text-left transition ${active?'border-slate-900 shadow':'border-slate-200 hover:shadow'} ${disabled?'opacity-40 pointer-events-none':''}`},
                  React.createElement('div',{className:'relative'},
                    React.createElement('div',{className:'aspect-video w-full rounded-xl bg-gradient-to-br from-slate-200 to-slate-100 grid place-items-center'},React.createElement(Icon,{kind:item.img})),
                    active && React.createElement('span',{className:'absolute -top-2 -right-2 h-7 w-7 rounded-full bg-slate-900 text-white grid place-items-center'},'✔')
                  ),
                  React.createElement('div',{className:'mt-3 font-medium'},item.name),
                  React.createElement('div',{className:'text-xs text-slate-500'},'SKU ',item.sku),
                  React.createElement('div',{className:'mt-1 text-sm'},'$',item.base.toFixed(2))
                );
              })
            )
          )
        ),
        React.createElement('section',{className:'lg:col-span-2 space-y-6'},
          React.createElement('div',{className:'bg-white rounded-2xl shadow-sm p-5 border border-slate-200'},
            React.createElement('h2',{className:'text-lg font-semibold'},'3) Box Preview'),
            React.createElement('p',{className:'text-sm text-slate-500'},'Quick visualization.'),
            React.createElement('div',{className:'mt-4 aspect-square rounded-2xl bg-slate-100 p-4'},
              React.createElement('div',{className:'h-full w-full rounded-xl border-2 border-dashed border-slate-300 grid grid-cols-2 gap-3 p-3'},
                Array.from({length:tier.slots}).map((_,idx)=>{
                  const id=selected[idx]; const item=CATALOG.find(i=>i.id===id);
                  return React.createElement('div',{key:idx,className:`rounded-xl grid place-items-center ${id?'bg-white border border-slate-200':'bg-slate-50 border border-slate-200'}`},
                    id ? React.createElement('div',{className:'w-full p-3'},
                      React.createElement('div',{className:'aspect-video w-full rounded-lg bg-gradient-to-br from-slate-200 to-slate-100 grid place-items-center'},React.createElement(Icon,{kind:item?.img})),
                      React.createElement('div',{className:'mt-2 text-sm font-medium text-center'},item?.name)
                    ) : React.createElement('div',{className:'text-xs text-slate-400'},'Empty Slot')
                  );
                })
              ),
              React.createElement('div',{className:'mt-3 text-center text-sm text-slate-500'},'Brand: ',React.createElement('span',{className:'font-medium text-slate-700'},brand)),
              logoDataUrl && React.createElement('div',{className:'mt-3 grid place-items-center'}, React.createElement('img',{src:logoDataUrl, alt:'Uploaded logo', className:'h-14 object-contain opacity-80'}))
            )
          ),
          React.createElement('div',{className:'bg-white rounded-2xl shadow-sm p-5 border border-slate-200'},
            React.createElement('h2',{className:'text-lg font-semibold'},'4) Logo Upload'),
            React.createElement('p',{className:'text-sm text-slate-500'},'Add your logo for mockups. It shows in the preview and is sent with your submission.'),
            React.createElement('div',{className:'mt-3 flex items-center gap-4'},
              React.createElement('input',{type:'file',accept:'image/*',onChange:onLogoChange,className:'block w-full text-sm text-slate-600 file:mr-4 file:py-2 file:px-3 file:rounded-lg file:border-0 file:text-sm file:font-medium file:bg-slate-900 file:text-white hover:file:opacity-90'}),
              logoDataUrl && React.createElement('button',{onClick:clearLogo,className:'px-3 py-2 rounded-lg border border-slate-300 hover:bg-slate-50'},'Remove')
            ),
            logoDataUrl && React.createElement('div',{className:'mt-3 flex items-center gap-3'},
              React.createElement('img',{src:logoDataUrl, alt:'Logo preview', className:'h-12 w-12 object-contain rounded-lg border border-slate-200 bg-white p-1'}),
              React.createElement('div',{className:'text-sm'}, React.createElement('div',{className:'font-medium'},logoName || 'logo'), React.createElement('div',{className:'text-xs text-slate-500'},'Included in preview above'))
            )
          ),
          React.createElement('div',{className:'bg-white rounded-2xl shadow-sm p-5 border border-slate-200'},
            React.createElement('h2',{className:'text-lg font-semibold'},'5) Summary & Submit'),
            React.createElement('div',{className:'mt-2 space-y-2 text-sm'},
              React.createElement('div',{className:'flex items-center justify-between'},React.createElement('span',null,'Box Tier'),React.createElement('span',{className:'font-medium'},tier.name)),
              React.createElement('div',{className:'flex items-center justify-between'},React.createElement('span',null,'Items Selected'),React.createElement('span',{className:'font-medium'},selected.length,' / ',tier.slots)),
              React.createElement('div',{className:'flex items-center justify-between'},React.createElement('span',null,'Estimated Price / ea'),React.createElement('span',{className:'font-semibold'},'$',priceEach)),
              React.createElement('div',{className:'flex items-center justify-between'},React.createElement('span',null,'Order Quantity'),React.createElement('span',{className:'font-medium'},qty)),
              React.createElement('div',{className:'flex items-center justify-between'},React.createElement('span',null,'Rough Total'),React.createElement('span',{className:'font-semibold'},'$',total))
            ),
            React.createElement('div',{className:'mt-4 grid gap-3'},
              React.createElement('label',{className:'block'},React.createElement('span',{className:'text-xs text-slate-500'},'Contact Email (required)'),React.createElement('input',{type:'email',placeholder:'you@company.com',value:email,onChange:e=>setEmail(e.target.value),className:'mt-1 w-full rounded-xl border border-slate-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-slate-900'})),
              React.createElement('button',{onClick:submit,disabled:sending,className:`px-4 py-2 rounded-xl text-white ${sending?'bg-slate-400':'bg-slate-900 hover:opacity-90'}`},sending?'Submitting…':'Submit Selections'),
              error && React.createElement('div',{className:'text-rose-600 text-sm'},error)
            )
          )
        )
      )
    );
  }
  const root=ReactDOM.createRoot(document.getElementById('root'));
  root.render(React.createElement(App));
  </script>
</body>
</html>
